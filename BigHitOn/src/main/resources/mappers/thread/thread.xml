<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bighit.on.thread">

	<insert id ="doInsert">
		INSERT INTO THREAD (thr_key,parent_key,ch_link,contents,reg_id,reg_dt) VALUES 
		    ('p'||LPAD(THREAD_SERIAL.NEXTVAL, 19, 0) ,#{parentKey}, #{chLink}, #{contents},#{regId},#{regDt})
	</insert>
	
	<insert id = "doInsertReplay">
		INSERT INTO THREAD (thr_key,contents,reg_id,reg_dt) VALUE (#{thrKey}, #{contents}, #{regId}, #{regDt})
	</insert>
	
	<!-- 계층형 쿼리로 작성할 것 -->
	<select id = "doSelectAll" 
	resultType = "com.bighit.on.thread.ThreadVO">
	SELECT reg_id as RegId,reg_dt as RegDt,contents FROM thread 
	</select>
	
	<delete id = "doDelete">
		DELETE FROM thread WHERE thr_key = #{thrKey}
	</delete>
	
	<update id="doUpdate">
		UPDATE THREAD SET contents=#{contents},mod_dt=#{modDt} WHERE thr_key = #{thrKey}
	</update>
	
	<select id = "doSelectOne"
	resultType = "com.bighit.on.thread.ThreadVO">
	SELECT parent_key,thr_key,reg_id,reg_dt,contents FROM thread Where thr_key = #{thrKey}	
	</select>
</mapper>
	
